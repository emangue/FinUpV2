# Cursor Rules - Mobile Experience Project

## ğŸ“± Projeto Atual: Mobile Experience V1.0

### Status: PRD + Style Guide Completos
- âœ… PRD: `/docs/features/PRD_MOBILE_EXPERIENCE.md` (135+ pÃ¡ginas)
- âœ… Style Guide: `/docs/features/MOBILE_STYLE_GUIDE.md` (45+ pÃ¡ginas)
- âœ… Index: `/docs/features/MOBILE_INDEX.md` (resumo executivo)
- â­ï¸ PrÃ³ximo: TECH_SPEC (EspecificaÃ§Ã£o TÃ©cnica)

---

## ğŸ¨ Design System - Imagem "Trackers"

### Paleta de Cores ExtraÃ­da (SEMPRE usar estas cores)
```typescript
const trackerColors = {
  casa: { bg: '#DDD6FE', icon: '#6B21A8', progress: '#9F7AEA' },      // Roxo
  alimentacao: { bg: '#DBEAFE', icon: '#1E40AF', progress: '#60A5FA' }, // Azul
  compras: { bg: '#FCE7F3', icon: '#BE185D', progress: '#F472B6' },   // Rosa
  transporte: { bg: '#E7E5E4', icon: '#78716C', progress: '#A8A29E' }, // Bege
  contas: { bg: '#FEF3C7', icon: '#D97706', progress: '#FCD34D' },    // Amarelo
  lazer: { bg: '#D1FAE5', icon: '#047857', progress: '#6EE7B7' },     // Verde
};
```

### DimensÃµes CrÃ­ticas (SEMPRE usar estas medidas)
```typescript
const dimensions = {
  iconCircle: '48px',         // Ãcones circulares
  progressHeight: '6px',      // Barras de progresso
  cardRadius: '16px',         // Border radius cards
  touchTarget: '44px',        // MÃ­nimo WCAG 2.5.5
  screenPadding: '20px',      // Padding lateral
  cardGap: '16px',            // Gap entre cards
};
```

### Tipografia (SEMPRE usar estas classes Tailwind)
```typescript
const typography = {
  pageTitle: 'text-[34px] font-bold leading-tight text-black',
  categoryName: 'text-[17px] font-semibold leading-snug text-black',
  frequency: 'text-[13px] font-normal leading-relaxed text-gray-400',
  amountPrimary: 'text-[17px] font-semibold leading-snug text-black',
  amountSecondary: 'text-[13px] font-normal leading-relaxed text-gray-400',
};
```

---

## ğŸš¨ REGRAS CRÃTICAS (Do copilot-instructions.md)

### 1. SincronizaÃ§Ã£o Git
**SEMPRE:** Local â†’ Git â†’ Servidor  
**NUNCA:** Editar cÃ³digo diretamente no servidor

### 2. Estrutura de Pastas

**REGRA CRÃTICA:** OrganizaÃ§Ã£o de Features/Projetos

**Estrutura OBRIGATÃ“RIA para novos projetos:**
```
/docs/features/[nome-projeto]/
â”œâ”€â”€ README.md                    # START HERE - navegaÃ§Ã£o rÃ¡pida
â”œâ”€â”€ 01-PRD/                      # Product Requirements Document
â”‚   â”œâ”€â”€ PRD.md                   # EspecificaÃ§Ã£o principal
â”‚   â”œâ”€â”€ STYLE_GUIDE.md          # Design System (se aplicÃ¡vel)
â”‚   â”œâ”€â”€ FACTIBILIDADE.md        # AnÃ¡lise tÃ©cnica
â”‚   â”œâ”€â”€ ANALISE_STAKEHOLDER.md  # Respostas a perguntas especÃ­ficas
â”‚   â”œâ”€â”€ SUMMARY.md              # Resumo executivo
â”‚   â”œâ”€â”€ CHECKLIST.md            # Checklist de implementaÃ§Ã£o
â”‚   â””â”€â”€ INDEX.md                # Ãndice e quick reference
â”œâ”€â”€ 02-TECH_SPEC/               # EspecificaÃ§Ã£o TÃ©cnica
â”‚   â”œâ”€â”€ TECH_SPEC.md            # Arquitetura, endpoints, componentes
â”‚   â”œâ”€â”€ API_SPEC.md             # EspecificaÃ§Ã£o de APIs (se necessÃ¡rio)
â”‚   â””â”€â”€ DATABASE_CHANGES.md     # MudanÃ§as no banco (se necessÃ¡rio)
â””â”€â”€ 03-DEPLOY/                  # Deploy e ProduÃ§Ã£o
    â”œâ”€â”€ DEPLOY_PLAN.md          # Plano de deploy
    â”œâ”€â”€ ROLLBACK_PLAN.md        # Plano de rollback
    â””â”€â”€ MONITORING.md           # MÃ©tricas e monitoramento
```

**Exemplo (Mobile V1.0):**
```
/docs/features/mobile-v1/
â”œâ”€â”€ README.md
â”œâ”€â”€ 01-PRD/
â”‚   â”œâ”€â”€ PRD.md
â”‚   â”œâ”€â”€ STYLE_GUIDE.md
â”‚   â”œâ”€â”€ FACTIBILIDADE.md
â”‚   â”œâ”€â”€ ANALISE_STAKEHOLDER.md
â”‚   â”œâ”€â”€ SUMMARY.md
â”‚   â”œâ”€â”€ CHECKLIST.md
â”‚   â””â”€â”€ INDEX.md
â”œâ”€â”€ 02-TECH_SPEC/ (a criar)
â””â”€â”€ 03-DEPLOY/ (a criar)
```

**NUNCA:**
- âŒ Criar mÃºltiplos arquivos soltos em `/docs/features/`
- âŒ Arquivos com prefixos como `MOBILE_*`, `PROJETO_*`, etc
- âŒ Duplicar informaÃ§Ã£o em mÃºltiplos arquivos
- âŒ Criar .md na raiz do projeto

**SEMPRE:**
- âœ… 1 pasta por projeto/feature
- âœ… Estrutura 01-PRD, 02-TECH_SPEC, 03-DEPLOY
- âœ… README.md como ponto de entrada
- âœ… Consolidar informaÃ§Ãµes (mÃ¡ximo 7-8 arquivos por pasta PRD)

### 3. Banco de Dados Ãšnico
**Path absoluto Ãºnico:** `/Users/emangue/Documents/ProjetoVSCode/ProjetoFinancasV5/app_dev/backend/database/financas_dev.db`  
**NUNCA:** Criar outro banco em qualquer local

### 4. Arquitetura
- **Backend:** DDD com domÃ­nios isolados (`app_dev/backend/app/domains/`)
- **Frontend:** Feature-based (`app_dev/frontend/src/features/`)
- **NUNCA:** Imports cruzados entre domÃ­nios ou features

### 5. Versionamento
**SEMPRE:** Usar `version_manager.py` para arquivos crÃ­ticos  
**NUNCA:** Commitar versÃµes `-dev` ou `-test`

### 6. Migrations
**SEMPRE:** Usar Alembic (`alembic revision --autogenerate`)  
**NUNCA:** Modificar schema SQL diretamente

### 7. Deploy
**SEMPRE:** Usar `./scripts/deploy/deploy.sh` (ou `deploy_build_local.sh` se OOM)  
**NUNCA:** Deploy sem backup, validaÃ§Ã£o, ou testes  
**Doc:** `docs/deploy/DEPLOY_PROCESSO_CONSOLIDADO.md`

### 7.1 Deploy e branches (alteraÃ§Ãµes grandes)
**SEMPRE:** Em alteraÃ§Ã£o grande, criar branch **antes** de subir no servidor (ex.: `deploy/YYYY-MM-DD-nome` ou `feature/nome`). Subir e validar **nessa branch** no servidor. **SÃ³ depois** que der certo no servidor: fazer merge dessa branch na `main` e push da main. Assim a main sÃ³ muda apÃ³s validaÃ§Ã£o no servidor; rollback = descartar a branch. O `safe_deploy.sh` oferece criar a branch automaticamente quando vocÃª estÃ¡ na main.

### 8. Backup
**SEMPRE:** Rodar `backup_daily.sh` antes de modificaÃ§Ãµes crÃ­ticas  
**NUNCA:** Modificar banco sem backup

### 9. Virtual Environment
**SEMPRE:** Usar `app_dev/venv` (nÃ£o `.venv` da raiz)  
**Scripts:** `./scripts/deploy/quick_start.sh` gerencia automaticamente

### 10. SeguranÃ§a
**SEMPRE:** Secrets em `.env` (NUNCA hardcoded)  
**NUNCA:** Commitar `.env`, senhas, tokens, ou API keys

---

## ğŸ“± Mobile Development - Regras EspecÃ­ficas

### Componentes Mobile
**SEMPRE criar em:** `app_dev/frontend/src/components/mobile/`  
**PadrÃ£o de nome:** `tracker-card.tsx`, `tracker-header.tsx`

### Rotas Mobile
**SEMPRE usar:** `/mobile/*` (ex: `/mobile/dashboard`, `/mobile/budget`)  
**Redirecionamento:** Detectar `window.innerWidth < 768px` â†’ redirecionar

### Bottom Navigation
**5 tabs fixas:**
1. Dashboard (ğŸ“Š)
2. TransaÃ§Ãµes (ğŸ’³)
3. Metas (ğŸ¯)
4. Upload (ğŸ“¤)
5. Profile (ğŸ‘¤)

### Componentes Base (Criar primeiro)
1. `TrackerCard` - Card de categoria com progress bar
2. `TrackerHeader` - Header com botÃµes voltar/menu
3. `ProgressBar` - Barra de progresso standalone
4. `CategoryIcon` - Ãcone circular colorido
5. `BottomNavigation` - NavegaÃ§Ã£o inferior fixa

### Ãcones (Lucide React)
```typescript
import { Home, UtensilsCrossed, ShoppingBag, Fuel, FileText, ShoppingCart } from 'lucide-react';
```

### Acessibilidade (WCAG 2.1 AA)
- **Touch targets:** MÃ­nimo 44x44px
- **Contraste:** â‰¥4.5:1 para texto normal
- **ARIA labels:** Todos os botÃµes de Ã­cones
- **Screen reader:** Testar com VoiceOver (iOS) e TalkBack (Android)

---

## ğŸ¯ 5 Telas Principais - Status

1. **Dashboard Mobile** - Reutilizar `MetricCards` existente âœ…
2. **TransaÃ§Ãµes Mobile** - Base existe, melhorar (bottom sheet, swipe) âš ï¸
3. **Metas (Budget) Mobile** - Criar do zero baseado em "Trackers" âŒ
4. **Profile Mobile** - Adaptar desktop para mobile âš ï¸
5. **Upload Mobile** - Criar versÃ£o mobile otimizada âŒ

---

## ğŸ“– DocumentaÃ§Ã£o - Sempre Consultar

### PRD (Product Requirements Document)
**Path:** `/docs/features/PRD_MOBILE_EXPERIENCE.md`  
**ConteÃºdo:** Requisitos completos, layouts ASCII, user stories, roadmap

### Style Guide (Guia de Estilo)
**Path:** `/docs/features/MOBILE_STYLE_GUIDE.md`  
**ConteÃºdo:** Cores, dimensÃµes, tipografia, componentes prontos, exemplos

### Index (Resumo Executivo)
**Path:** `/docs/features/MOBILE_INDEX.md`  
**ConteÃºdo:** VisÃ£o geral, checklist, prÃ³ximos passos

### Copilot Instructions (Regras do Projeto)
**Path:** `/.github/copilot-instructions.md`  
**ConteÃºdo:** 2700+ linhas de regras crÃ­ticas do projeto

---

## ğŸ”„ Workflow de Desenvolvimento

### 1. Antes de ComeÃ§ar
```bash
# 1. Verificar sincronizaÃ§Ã£o
git status  # Deve estar limpo

# 2. Backup diÃ¡rio
./scripts/deploy/backup_daily.sh

# 3. Ligar servidores
./scripts/deploy/quick_start.sh

# Reiniciar (stop + start): ./scripts/deploy/quick_restart.sh
```

### 2. Durante Desenvolvimento
- **Arquivos crÃ­ticos:** Usar `version_manager.py start/finish`
- **Imports:** Nunca cruzar domÃ­nios/features
- **Commits:** Usar prefixos (feat:, fix:, refactor:, docs:)

### 3. Antes de Commitar
```bash
# 1. Testar localmente
# 2. Verificar lints
# 3. Atualizar changelog (se necessÃ¡rio)
# 4. Commit com mensagem clara
git add .
git commit -m "feat(mobile): adiciona componente TrackerCard"
```

### 4. Antes de Deploy
```bash
# 1. Validar localmente
git status -uno          # Deve estar limpo
git push origin <branch> # Ex: feature/revisao-completa-do-app

# 2. NÃ£o deve existir middleware.ts (apenas proxy.ts)
#    Remover: app_dev/frontend/src/middleware.ts

# 3. Deploy (um comando)
./scripts/deploy/deploy.sh

# Se OOM no build: ./scripts/deploy/deploy_build_local.sh
```

**Scripts:** `deploy.sh` (padrÃ£o) | `deploy_build_local.sh` (alternativa OOM)  
**Doc:** `docs/deploy/DEPLOY_PROCESSO_CONSOLIDADO.md`

---

## ğŸš€ PrÃ³ximos Passos (Ordem de Prioridade)

1. **TECH_SPEC** - Criar especificaÃ§Ã£o tÃ©cnica completa
2. **TrackerCard Component** - Implementar componente base
3. **TrackerHeader Component** - Implementar header mobile
4. **Bottom Navigation** - Implementar navegaÃ§Ã£o inferior
5. **Metas Mobile** - Implementar tela de metas (baseada em "Trackers")

---

## ğŸ’¡ Lembretes Importantes

### SEMPRE Fazer
- âœ… Consultar PRD e Style Guide antes de implementar
- âœ… Usar cores e dimensÃµes da imagem "Trackers"
- âœ… Seguir estrutura de pastas do projeto
- âœ… Testar acessibilidade (contraste, touch targets)
- âœ… Backup antes de modificaÃ§Ãµes crÃ­ticas
- âœ… Usar domÃ­nios/features isolados

### NUNCA Fazer
- âŒ Editar cÃ³digo diretamente no servidor
- âŒ Criar arquivos na raiz (usar /docs/, /scripts/, /temp/)
- âŒ Hardcoded secrets/passwords
- âŒ Imports cruzados entre domÃ­nios
- âŒ Modificar schema SQL diretamente (usar Alembic)
- âŒ Deploy sem backup e validaÃ§Ã£o

---

## ğŸ“ Contatos e Recursos

### DocumentaÃ§Ã£o do Projeto
- **README:** `/Users/emangue/Documents/ProjetoVSCode/ProjetoFinancasV5/README.md`
- **Docs:** `/Users/emangue/Documents/ProjetoVSCode/ProjetoFinancasV5/docs/`

### Servidor de ProduÃ§Ã£o
- **IP:** 148.230.78.91
- **SSH:** `ssh minha-vps-hostinger`
- **Path:** `/var/www/finup`

### Banco de Dados
- **Local:** SQLite em `app_dev/backend/database/financas_dev.db`
- **ProduÃ§Ã£o:** PostgreSQL em `127.0.0.1:5432/finup_db`

---

**IMPORTANTE:** Este arquivo `.cursorrules` garante que todas as regras crÃ­ticas sejam SEMPRE consideradas em futuras interaÃ§Ãµes. SEMPRE consultar antes de implementar!

---

**Ãšltima atualizaÃ§Ã£o:** 31/01/2026  
**Status:** PRD + Style Guide completos âœ…  
**PrÃ³ximo:** TECH_SPEC ğŸš€
